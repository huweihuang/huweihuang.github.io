<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content>
    <meta name="keyword" content>
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          APISIX配置 - 胡伟煌 | Blog
        
    </title>

    <link rel="canonical" href="http://www.huweihuang.com/kubernetes-notes/network/gateway/apisix-config/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS --> 
    <link rel="stylesheet" href="/css/beantech.min.css">

    <link rel="stylesheet" href="/css/donate.css">
    
    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('https://res.cloudinary.com/dqxtn0ick/image/upload/v1542285471/header/article.jpg')
            /*post*/
        
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#ApiSix" title="ApiSix">ApiSix</a>
                            
                        </div>
                        <h1>APISIX配置</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by 胡伟煌 on
                            2022-09-10
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">胡伟煌</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <blockquote>
<p>本文主要记录apisix相关组件默认配置，便于查阅。</p>
</blockquote>
<h2 id="1-apisix配置"><a href="#1-apisix配置" class="headerlink" title="1. apisix配置"></a>1. apisix配置</h2><p>参考：<a href="https://github.com/apache/apisix/blob/master/conf/config-default.yaml" target="_blank" rel="noopener">apisix/config-default.yaml at master · apache/apisix · GitHub</a></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Licensed to the Apache Software Foundation (ASF) under one or more</span></span><br><span class="line"><span class="comment"># contributor license agreements.  See the NOTICE file distributed with</span></span><br><span class="line"><span class="comment"># this work for additional information regarding copyright ownership.</span></span><br><span class="line"><span class="comment"># The ASF licenses this file to You under the Apache License, Version 2.0</span></span><br><span class="line"><span class="comment"># (the "License"); you may not use this file except in compliance with</span></span><br><span class="line"><span class="comment"># the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"># distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"># See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"># limitations under the License.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># PLEASE DO NOT UPDATE THIS FILE!</span></span><br><span class="line"><span class="comment"># If you want to set the specified configuration value, you can set the new</span></span><br><span class="line"><span class="comment"># value in the conf/config.yaml file.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="attr">apisix:</span></span><br><span class="line">  <span class="comment"># node_listen: 9080               # APISIX listening port</span></span><br><span class="line">  <span class="attr">node_listen:</span>                      <span class="comment"># This style support multiple ports</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">9080</span></span><br><span class="line">  <span class="comment">#   - port: 9081</span></span><br><span class="line">  <span class="comment">#     enable_http2: true          # If not set, the default value is `false`.</span></span><br><span class="line">  <span class="comment">#   - ip: 127.0.0.2               # Specific IP, If not set, the default value is `0.0.0.0`.</span></span><br><span class="line">  <span class="comment">#     port: 9082</span></span><br><span class="line">  <span class="comment">#     enable_http2: true</span></span><br><span class="line">  <span class="attr">enable_admin:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">enable_admin_cors:</span> <span class="literal">true</span>           <span class="comment"># Admin API support CORS response headers.</span></span><br><span class="line">  <span class="attr">enable_dev_mode:</span> <span class="literal">false</span>            <span class="comment"># Sets nginx worker_processes to 1 if set to true</span></span><br><span class="line">  <span class="attr">enable_reuseport:</span> <span class="literal">true</span>            <span class="comment"># Enable nginx SO_REUSEPORT switch if set to true.</span></span><br><span class="line">  <span class="attr">show_upstream_status_in_response_header:</span> <span class="literal">false</span> <span class="comment"># when true all upstream status write to `X-APISIX-Upstream-Status` otherwise only 5xx code</span></span><br><span class="line">  <span class="attr">enable_ipv6:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">config_center:</span> <span class="string">etcd</span>               <span class="comment"># etcd: use etcd to store the config value</span></span><br><span class="line">                                    <span class="comment"># yaml: fetch the config value from local yaml file `/your_path/conf/apisix.yaml`</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">#proxy_protocol:                  # Proxy Protocol configuration</span></span><br><span class="line">  <span class="comment">#listen_http_port: 9181           # The port with proxy protocol for http, it differs from node_listen and admin_listen.</span></span><br><span class="line">                                    <span class="comment"># This port can only receive http request with proxy protocol, but node_listen &amp; admin_listen</span></span><br><span class="line">                                    <span class="comment"># can only receive http request. If you enable proxy protocol, you must use this port to</span></span><br><span class="line">                                    <span class="comment"># receive http request with proxy protocol</span></span><br><span class="line">  <span class="comment">#listen_https_port: 9182          # The port with proxy protocol for https</span></span><br><span class="line">  <span class="comment">#enable_tcp_pp: true              # Enable the proxy protocol for tcp proxy, it works for stream_proxy.tcp option</span></span><br><span class="line">  <span class="comment">#enable_tcp_pp_to_upstream: true  # Enables the proxy protocol to the upstream server</span></span><br><span class="line">  <span class="attr">enable_server_tokens:</span> <span class="literal">true</span>        <span class="comment"># Whether the APISIX version number should be shown in Server header.</span></span><br><span class="line">                                    <span class="comment"># It's enabled by default.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># configurations to load third party code and/or override the builtin one.</span></span><br><span class="line">  <span class="attr">extra_lua_path:</span> <span class="string">""</span>                <span class="comment"># extend lua_package_path to load third party code</span></span><br><span class="line">  <span class="attr">extra_lua_cpath:</span> <span class="string">""</span>               <span class="comment"># extend lua_package_cpath to load third party code</span></span><br><span class="line">  <span class="comment">#lua_module_hook: "my_project.my_hook"  # the hook module which will be used to inject third party code into APISIX</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">proxy_cache:</span>                      <span class="comment"># Proxy Caching configuration</span></span><br><span class="line">    <span class="attr">cache_ttl:</span> <span class="string">10s</span>                  <span class="comment"># The default caching time in disk if the upstream does not specify the cache time</span></span><br><span class="line">    <span class="attr">zones:</span>                          <span class="comment"># The parameters of a cache</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">disk_cache_one</span>        <span class="comment"># The name of the cache, administrator can specify</span></span><br><span class="line">                                    <span class="comment"># which cache to use by name in the admin api (disk|memory)</span></span><br><span class="line">        <span class="attr">memory_size:</span> <span class="string">50m</span>            <span class="comment"># The size of shared memory, it's used to store the cache index for</span></span><br><span class="line">                                    <span class="comment"># disk strategy, store cache content for memory strategy (disk|memory)</span></span><br><span class="line">        <span class="attr">disk_size:</span> <span class="string">1G</span>               <span class="comment"># The size of disk, it's used to store the cache data (disk)</span></span><br><span class="line">        <span class="attr">disk_path:</span> <span class="string">/tmp/disk_cache_one</span>  <span class="comment"># The path to store the cache data (disk)</span></span><br><span class="line">        <span class="attr">cache_levels:</span> <span class="number">1</span><span class="string">:2</span>           <span class="comment"># The hierarchy levels of a cache (disk)</span></span><br><span class="line">      <span class="comment">#- name: disk_cache_two</span></span><br><span class="line">      <span class="comment">#  memory_size: 50m</span></span><br><span class="line">      <span class="comment">#  disk_size: 1G</span></span><br><span class="line">      <span class="comment">#  disk_path: "/tmp/disk_cache_two"</span></span><br><span class="line">      <span class="comment">#  cache_levels: "1:2"</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">memory_cache</span></span><br><span class="line">        <span class="attr">memory_size:</span> <span class="string">50m</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">allow_admin:</span>                  <span class="comment"># http://nginx.org/en/docs/http/ngx_http_access_module.html#allow</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.0</span><span class="string">/24</span>              <span class="comment"># If we don't set any IP list, then any IP access is allowed by default.</span></span><br><span class="line">    <span class="comment">#- "::/64"</span></span><br><span class="line">  <span class="comment">#admin_listen:                # use a separate port</span></span><br><span class="line">  <span class="comment">#  ip: 127.0.0.1              # Specific IP, if not set, the default value is `0.0.0.0`.</span></span><br><span class="line">  <span class="comment">#  port: 9180</span></span><br><span class="line">  <span class="comment">#https_admin: true            # enable HTTPS when use a separate port for Admin API.</span></span><br><span class="line">                                <span class="comment"># Admin API will use conf/apisix_admin_api.crt and conf/apisix_admin_api.key as certificate.</span></span><br><span class="line">  <span class="attr">admin_api_mtls:</span>               <span class="comment"># Depends on `admin_listen` and `https_admin`.</span></span><br><span class="line">    <span class="attr">admin_ssl_cert:</span> <span class="string">""</span>          <span class="comment"># Path of your self-signed server side cert.</span></span><br><span class="line">    <span class="attr">admin_ssl_cert_key:</span> <span class="string">""</span>      <span class="comment"># Path of your self-signed server side key.</span></span><br><span class="line">    <span class="attr">admin_ssl_ca_cert:</span> <span class="string">""</span>       <span class="comment"># Path of your self-signed ca cert.The CA is used to sign all admin api callers' certificates.</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">admin_api_version:</span> <span class="string">v3</span>        <span class="comment"># The version of admin api, latest version is v3.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Default token when use API to call for Admin API.</span></span><br><span class="line">  <span class="comment"># *NOTE*: Highly recommended to modify this value to protect APISIX's Admin API.</span></span><br><span class="line">  <span class="comment"># Disabling this configuration item means that the Admin API does not</span></span><br><span class="line">  <span class="comment"># require any authentication.</span></span><br><span class="line">  <span class="attr">admin_key:</span></span><br><span class="line">    <span class="bullet">-</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">admin</span></span><br><span class="line">      <span class="attr">key:</span> <span class="string">edd1c9f034335f136f87ad84b625c8f1</span></span><br><span class="line">      <span class="attr">role:</span> <span class="string">admin</span>                 <span class="comment"># admin: manage all configuration data</span></span><br><span class="line">                                  <span class="comment"># viewer: only can view configuration data</span></span><br><span class="line">    <span class="bullet">-</span></span><br><span class="line">      <span class="attr">name:</span> <span class="string">viewer</span></span><br><span class="line">      <span class="attr">key:</span> <span class="string">4054f7cf07e344346cd3f287985e76a2</span></span><br><span class="line">      <span class="attr">role:</span> <span class="string">viewer</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">delete_uri_tail_slash:</span> <span class="literal">false</span>    <span class="comment"># delete the '/' at the end of the URI</span></span><br><span class="line">  <span class="comment"># The URI normalization in servlet is a little different from the RFC's.</span></span><br><span class="line">  <span class="comment"># See https://github.com/jakartaee/servlet/blob/master/spec/src/main/asciidoc/servlet-spec-body.adoc#352-uri-path-canonicalization,</span></span><br><span class="line">  <span class="comment"># which is used under Tomcat.</span></span><br><span class="line">  <span class="comment"># Turn this option on if you want to be compatible with servlet when matching URI path.</span></span><br><span class="line">  <span class="attr">normalize_uri_like_servlet:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">router:</span></span><br><span class="line">    <span class="attr">http:</span> <span class="string">radixtree_uri</span>         <span class="comment"># radixtree_uri: match route by uri(base on radixtree)</span></span><br><span class="line">                                  <span class="comment"># radixtree_host_uri: match route by host + uri(base on radixtree)</span></span><br><span class="line">                                  <span class="comment"># radixtree_uri_with_parameter: like radixtree_uri but match uri with parameters,</span></span><br><span class="line">                                  <span class="comment">#   see https://github.com/api7/lua-resty-radixtree/#parameters-in-path for</span></span><br><span class="line">                                  <span class="comment">#   more details.</span></span><br><span class="line">    <span class="attr">ssl:</span> <span class="string">radixtree_sni</span>          <span class="comment"># radixtree_sni: match route by SNI(base on radixtree)</span></span><br><span class="line">  <span class="comment">#stream_proxy:                  # TCP/UDP proxy</span></span><br><span class="line">  <span class="comment">#  only: true                   # use stream proxy only, don't enable HTTP stuff</span></span><br><span class="line">  <span class="comment">#  tcp:                         # TCP proxy port list</span></span><br><span class="line">  <span class="comment">#    - addr: 9100</span></span><br><span class="line">  <span class="comment">#      tls: true</span></span><br><span class="line">  <span class="comment">#    - addr: "127.0.0.1:9101"</span></span><br><span class="line">  <span class="comment">#  udp:                         # UDP proxy port list</span></span><br><span class="line">  <span class="comment">#    - 9200</span></span><br><span class="line">  <span class="comment">#    - "127.0.0.1:9201"</span></span><br><span class="line">  <span class="comment">#dns_resolver:                  # If not set, read from `/etc/resolv.conf`</span></span><br><span class="line">  <span class="comment">#  - 1.1.1.1</span></span><br><span class="line">  <span class="comment">#  - 8.8.8.8</span></span><br><span class="line">  <span class="comment">#dns_resolver_valid: 30         # if given, override the TTL of the valid records. The unit is second.</span></span><br><span class="line">  <span class="attr">resolver_timeout:</span> <span class="number">5</span>             <span class="comment"># resolver timeout</span></span><br><span class="line">  <span class="attr">enable_resolv_search_opt:</span> <span class="literal">true</span>  <span class="comment"># enable search option in resolv.conf</span></span><br><span class="line">  <span class="attr">ssl:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">listen:</span>                       <span class="comment"># APISIX listening port in https.</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">port:</span> <span class="number">9443</span></span><br><span class="line">        <span class="attr">enable_http2:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment">#   - ip: 127.0.0.3           # Specific IP, If not set, the default value is `0.0.0.0`.</span></span><br><span class="line">    <span class="comment">#     port: 9445</span></span><br><span class="line">    <span class="comment">#     enable_http2: true</span></span><br><span class="line">    <span class="comment">#ssl_trusted_certificate: /path/to/ca-cert  # Specifies a file path with trusted CA certificates in the PEM format</span></span><br><span class="line">                                                <span class="comment"># used to verify the certificate when APISIX needs to do SSL/TLS handshaking</span></span><br><span class="line">                                                <span class="comment"># with external services (e.g. etcd)</span></span><br><span class="line">    <span class="attr">ssl_protocols:</span> <span class="string">TLSv1.2</span> <span class="string">TLSv1.3</span></span><br><span class="line">    <span class="attr">ssl_ciphers:</span> <span class="string">ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:DHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384</span></span><br><span class="line">    <span class="attr">ssl_session_tickets:</span> <span class="literal">false</span>              <span class="comment">#  disable ssl_session_tickets by default for 'ssl_session_tickets' would make Perfect Forward Secrecy useless.</span></span><br><span class="line">                                            <span class="comment">#  ref: https://github.com/mozilla/server-side-tls/issues/135</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">key_encrypt_salt:</span> <span class="string">edd1c9f0985e76a2</span>      <span class="comment">#  If not set, will save origin ssl key into etcd.</span></span><br><span class="line">                                            <span class="comment">#  If set this, must be a string of length 16. And it will encrypt ssl key with AES-128-CBC</span></span><br><span class="line">                                            <span class="comment">#  !!! So do not change it after saving your ssl, it can't decrypt the ssl keys have be saved if you change !!</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">#fallback_sni: "my.default.domain"      # If set this, when the client doesn't send SNI during handshake, the fallback SNI will be used instead</span></span><br><span class="line">  <span class="attr">enable_control:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment">#control:</span></span><br><span class="line">  <span class="comment">#  ip: 127.0.0.1</span></span><br><span class="line">  <span class="comment">#  port: 9090</span></span><br><span class="line">  <span class="attr">disable_sync_configuration_during_start:</span> <span class="literal">false</span>  <span class="comment"># safe exit. Remove this once the feature is stable</span></span><br><span class="line"></span><br><span class="line"><span class="attr">nginx_config:</span>                     <span class="comment"># config for render the template to generate nginx.conf</span></span><br><span class="line">  <span class="comment">#user: root                     # specifies the execution user of the worker process.</span></span><br><span class="line">                                  <span class="comment"># the "user" directive makes sense only if the master process runs with super-user privileges.</span></span><br><span class="line">                                  <span class="comment"># if you're not root user,the default is current user.</span></span><br><span class="line">  <span class="attr">error_log:</span> <span class="string">logs/error.log</span></span><br><span class="line">  <span class="attr">error_log_level:</span>  <span class="string">warn</span>          <span class="comment"># warn,error</span></span><br><span class="line">  <span class="attr">worker_processes:</span> <span class="string">auto</span>          <span class="comment"># if you want use multiple cores in container, you can inject the number of cpu as environment variable "APISIX_WORKER_PROCESSES"</span></span><br><span class="line">  <span class="attr">enable_cpu_affinity:</span> <span class="literal">true</span>       <span class="comment"># enable cpu affinity, this is just work well only on physical machine</span></span><br><span class="line">  <span class="attr">worker_rlimit_nofile:</span> <span class="number">20480</span>     <span class="comment"># the number of files a worker process can open, should be larger than worker_connections</span></span><br><span class="line">  <span class="attr">worker_shutdown_timeout:</span> <span class="string">240s</span>   <span class="comment"># timeout for a graceful shutdown of worker processes</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">max_pending_timers:</span> <span class="number">16384</span>       <span class="comment"># increase it if you see "too many pending timers" error</span></span><br><span class="line">  <span class="attr">max_running_timers:</span> <span class="number">4096</span>        <span class="comment"># increase it if you see "lua_max_running_timers are not enough" error</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">event:</span></span><br><span class="line">    <span class="attr">worker_connections:</span> <span class="number">10620</span></span><br><span class="line">  <span class="comment">#envs:                          # allow to get a list of environment variables</span></span><br><span class="line">  <span class="comment">#  - TEST_ENV</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">meta:</span></span><br><span class="line">    <span class="attr">lua_shared_dict:</span></span><br><span class="line">      <span class="attr">prometheus-metrics:</span> <span class="string">15m</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">stream:</span></span><br><span class="line">    <span class="attr">enable_access_log:</span> <span class="literal">false</span>         <span class="comment"># enable access log or not, default false</span></span><br><span class="line">    <span class="attr">access_log:</span> <span class="string">logs/access_stream.log</span></span><br><span class="line">    <span class="attr">access_log_format:</span> <span class="string">"$remote_addr [$time_local] $protocol $status $bytes_sent $bytes_received $session_time"</span></span><br><span class="line">                                            <span class="comment"># create your custom log format by visiting http://nginx.org/en/docs/varindex.html</span></span><br><span class="line">    <span class="attr">access_log_format_escape:</span> <span class="string">default</span>       <span class="comment"># allows setting json or default characters escaping in variables</span></span><br><span class="line">    <span class="attr">lua_shared_dict:</span></span><br><span class="line">      <span class="attr">etcd-cluster-health-check-stream:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">lrucache-lock-stream:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">plugin-limit-conn-stream:</span> <span class="string">10m</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># As user can add arbitrary configurations in the snippet,</span></span><br><span class="line">  <span class="comment"># it is user's responsibility to check the configurations</span></span><br><span class="line">  <span class="comment"># don't conflict with APISIX.</span></span><br><span class="line">  <span class="attr">main_configuration_snippet:</span> <span class="string">|</span></span><br><span class="line">    <span class="comment"># Add custom Nginx main configuration to nginx.conf.</span></span><br><span class="line">    <span class="comment"># The configuration should be well indented!</span></span><br><span class="line">  <span class="attr">http_configuration_snippet:</span> <span class="string">|</span></span><br><span class="line">    <span class="comment"># Add custom Nginx http configuration to nginx.conf.</span></span><br><span class="line">    <span class="comment"># The configuration should be well indented!</span></span><br><span class="line">  <span class="attr">http_server_configuration_snippet:</span> <span class="string">|</span></span><br><span class="line">    <span class="comment"># Add custom Nginx http server configuration to nginx.conf.</span></span><br><span class="line">    <span class="comment"># The configuration should be well indented!</span></span><br><span class="line">  <span class="attr">http_server_location_configuration_snippet:</span> <span class="string">|</span></span><br><span class="line">    <span class="comment"># Add custom Nginx http server location configuration to nginx.conf.</span></span><br><span class="line">    <span class="comment"># The configuration should be well indented!</span></span><br><span class="line">  <span class="attr">http_admin_configuration_snippet:</span> <span class="string">|</span></span><br><span class="line">    <span class="comment"># Add custom Nginx admin server configuration to nginx.conf.</span></span><br><span class="line">    <span class="comment"># The configuration should be well indented!</span></span><br><span class="line">  <span class="attr">http_end_configuration_snippet:</span> <span class="string">|</span></span><br><span class="line">    <span class="comment"># Add custom Nginx http end configuration to nginx.conf.</span></span><br><span class="line">    <span class="comment"># The configuration should be well indented!</span></span><br><span class="line">  <span class="attr">stream_configuration_snippet:</span> <span class="string">|</span></span><br><span class="line">    <span class="comment"># Add custom Nginx stream configuration to nginx.conf.</span></span><br><span class="line">    <span class="comment"># The configuration should be well indented!</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">http:</span></span><br><span class="line">    <span class="attr">enable_access_log:</span> <span class="literal">true</span>         <span class="comment"># enable access log or not, default true</span></span><br><span class="line">    <span class="attr">access_log:</span> <span class="string">logs/access.log</span></span><br><span class="line">    <span class="attr">access_log_format:</span> <span class="string">"$remote_addr - $remote_user [$time_local] $http_host \"$request\" $status $body_bytes_sent $request_time \"$http_referer\" \"$http_user_agent\" $upstream_addr $upstream_status $upstream_response_time \"$upstream_scheme://$upstream_host$upstream_uri\""</span></span><br><span class="line">    <span class="attr">access_log_format_escape:</span> <span class="string">default</span>       <span class="comment"># allows setting json or default characters escaping in variables</span></span><br><span class="line">    <span class="attr">keepalive_timeout:</span> <span class="string">60s</span>          <span class="comment"># timeout during which a keep-alive client connection will stay open on the server side.</span></span><br><span class="line">    <span class="attr">client_header_timeout:</span> <span class="string">60s</span>      <span class="comment"># timeout for reading client request header, then 408 (Request Time-out) error is returned to the client</span></span><br><span class="line">    <span class="attr">client_body_timeout:</span> <span class="string">60s</span>        <span class="comment"># timeout for reading client request body, then 408 (Request Time-out) error is returned to the client</span></span><br><span class="line">    <span class="attr">client_max_body_size:</span> <span class="number">0</span>         <span class="comment"># The maximum allowed size of the client request body.</span></span><br><span class="line">                                    <span class="comment"># If exceeded, the 413 (Request Entity Too Large) error is returned to the client.</span></span><br><span class="line">                                    <span class="comment"># Note that unlike Nginx, we don't limit the body size by default.</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">send_timeout:</span> <span class="string">10s</span>              <span class="comment"># timeout for transmitting a response to the client.then the connection is closed</span></span><br><span class="line">    <span class="attr">underscores_in_headers:</span> <span class="string">"on"</span>   <span class="comment"># default enables the use of underscores in client request header fields</span></span><br><span class="line">    <span class="attr">real_ip_header:</span> <span class="string">X-Real-IP</span>      <span class="comment"># http://nginx.org/en/docs/http/ngx_http_realip_module.html#real_ip_header</span></span><br><span class="line">    <span class="attr">real_ip_recursive:</span> <span class="string">"off"</span>       <span class="comment"># http://nginx.org/en/docs/http/ngx_http_realip_module.html#real_ip_recursive</span></span><br><span class="line">    <span class="attr">real_ip_from:</span>                  <span class="comment"># http://nginx.org/en/docs/http/ngx_http_realip_module.html#set_real_ip_from</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">"unix:"</span></span><br><span class="line">    <span class="comment">#custom_lua_shared_dict:       # add custom shared cache to nginx.conf</span></span><br><span class="line">    <span class="comment">#  ipc_shared_dict: 100m       # custom shared cache, format: `cache-key: cache-size`</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># Enables or disables passing of the server name through TLS Server Name Indication extension (SNI, RFC 6066)</span></span><br><span class="line">    <span class="comment"># when establishing a connection with the proxied HTTPS server.</span></span><br><span class="line">    <span class="attr">proxy_ssl_server_name:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">upstream:</span></span><br><span class="line">      <span class="attr">keepalive:</span> <span class="number">320</span>                <span class="comment"># Sets the maximum number of idle keepalive connections to upstream servers that are preserved in the cache of each worker process.</span></span><br><span class="line">                                    <span class="comment"># When this number is exceeded, the least recently used connections are closed.</span></span><br><span class="line">      <span class="attr">keepalive_requests:</span> <span class="number">1000</span>      <span class="comment"># Sets the maximum number of requests that can be served through one keepalive connection.</span></span><br><span class="line">                                    <span class="comment"># After the maximum number of requests is made, the connection is closed.</span></span><br><span class="line">      <span class="attr">keepalive_timeout:</span> <span class="string">60s</span>        <span class="comment"># Sets a timeout during which an idle keepalive connection to an upstream server will stay open.</span></span><br><span class="line">    <span class="attr">charset:</span> <span class="string">utf-8</span>                  <span class="comment"># Adds the specified charset to the "Content-Type" response header field, see</span></span><br><span class="line">                                    <span class="comment"># http://nginx.org/en/docs/http/ngx_http_charset_module.html#charset</span></span><br><span class="line">    <span class="attr">variables_hash_max_size:</span> <span class="number">2048</span>   <span class="comment"># Sets the maximum size of the variables hash table.</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">lua_shared_dict:</span></span><br><span class="line">      <span class="attr">internal-status:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">plugin-limit-req:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">plugin-limit-count:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">prometheus-metrics:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">plugin-limit-conn:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">upstream-healthcheck:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">worker-events:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">lrucache-lock:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">balancer-ewma:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">balancer-ewma-locks:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">balancer-ewma-last-touched-at:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">plugin-limit-count-redis-cluster-slot-lock:</span> <span class="string">1m</span></span><br><span class="line">      <span class="attr">tracing_buffer:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">plugin-api-breaker:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">etcd-cluster-health-check:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">discovery:</span> <span class="string">1m</span></span><br><span class="line">      <span class="attr">jwks:</span> <span class="string">1m</span></span><br><span class="line">      <span class="attr">introspection:</span> <span class="string">10m</span></span><br><span class="line">      <span class="attr">access-tokens:</span> <span class="string">1m</span></span><br><span class="line">      <span class="attr">ext-plugin:</span> <span class="string">1m</span></span><br><span class="line">      <span class="attr">kubernetes:</span> <span class="string">1m</span></span><br><span class="line">      <span class="attr">tars:</span> <span class="string">1m</span></span><br><span class="line"></span><br><span class="line"><span class="attr">etcd:</span></span><br><span class="line">  <span class="attr">host:</span>                           <span class="comment"># it's possible to define multiple etcd hosts addresses of the same etcd cluster.</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">"http://127.0.0.1:2379"</span>     <span class="comment"># multiple etcd address, if your etcd cluster enables TLS, please use https scheme,</span></span><br><span class="line">                                  <span class="comment"># e.g. https://127.0.0.1:2379.</span></span><br><span class="line">  <span class="attr">prefix:</span> <span class="string">/apisix</span>                 <span class="comment"># apisix configurations prefix</span></span><br><span class="line">  <span class="comment">#timeout: 30                    # 30 seconds</span></span><br><span class="line">  <span class="comment">#resync_delay: 5                # when sync failed and a rest is needed, resync after the configured seconds plus 50% random jitter</span></span><br><span class="line">  <span class="comment">#health_check_timeout: 10       # etcd retry the unhealthy nodes after the configured seconds</span></span><br><span class="line">  <span class="attr">startup_retry:</span> <span class="number">2</span>                <span class="comment"># the number of retry to etcd during the startup, default to 2</span></span><br><span class="line">  <span class="comment">#user: root                     # root username for etcd</span></span><br><span class="line">  <span class="comment">#password: 5tHkHhYkjr6cQY       # root password for etcd</span></span><br><span class="line">  <span class="attr">tls:</span></span><br><span class="line">    <span class="comment"># To enable etcd client certificate you need to build APISIX-Base, see</span></span><br><span class="line">    <span class="comment"># https://apisix.apache.org/docs/apisix/FAQ#how-do-i-build-the-apisix-base-environment</span></span><br><span class="line">    <span class="comment">#cert: /path/to/cert          # path of certificate used by the etcd client</span></span><br><span class="line">    <span class="comment">#key: /path/to/key            # path of key used by the etcd client</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">verify:</span> <span class="literal">true</span>                  <span class="comment"># whether to verify the etcd endpoint certificate when setup a TLS connection to etcd,</span></span><br><span class="line">                                  <span class="comment"># the default value is true, e.g. the certificate will be verified strictly.</span></span><br><span class="line">    <span class="comment">#sni:                         # the SNI for etcd TLS requests. If missed, the host part of the URL will be used.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># HashiCorp Vault storage backend for sensitive data retrieval. The config shows an example of what APISIX expects if you</span></span><br><span class="line"><span class="comment"># wish to integrate Vault for secret (sensetive string, public private keys etc.) retrieval. APISIX communicates with Vault</span></span><br><span class="line"><span class="comment"># server HTTP APIs. By default, APISIX doesn't need this configuration.</span></span><br><span class="line"><span class="comment"># vault:</span></span><br><span class="line"><span class="comment">#   host: "http://0.0.0.0:8200"   # The host address where the vault server is running.</span></span><br><span class="line"><span class="comment">#   timeout: 10                   # request timeout 30 seconds</span></span><br><span class="line"><span class="comment">#   token: root                   # Authentication token to access Vault HTTP APIs</span></span><br><span class="line"><span class="comment">#   prefix: kv/apisix             # APISIX supports vault kv engine v1, where sensitive data are being stored</span></span><br><span class="line">                                  <span class="comment"># and retrieved through vault HTTP APIs. enabling a prefix allows you to better enforcement of</span></span><br><span class="line">                                  <span class="comment"># policies, generate limited scoped tokens and tightly control the data that can be accessed</span></span><br><span class="line">                                  <span class="comment"># from APISIX.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#discovery:                       # service discovery center</span></span><br><span class="line"><span class="comment">#  dns:</span></span><br><span class="line"><span class="comment">#    servers:</span></span><br><span class="line"><span class="comment">#      - "127.0.0.1:8600"         # use the real address of your dns server</span></span><br><span class="line"><span class="comment">#  eureka:</span></span><br><span class="line"><span class="comment">#    host:                        # it's possible to define multiple eureka hosts addresses of the same eureka cluster.</span></span><br><span class="line"><span class="comment">#      - "http://127.0.0.1:8761"</span></span><br><span class="line"><span class="comment">#    prefix: /eureka/</span></span><br><span class="line"><span class="comment">#    fetch_interval: 30           # default 30s</span></span><br><span class="line"><span class="comment">#    weight: 100                  # default weight for node</span></span><br><span class="line"><span class="comment">#    timeout:</span></span><br><span class="line"><span class="comment">#      connect: 2000              # default 2000ms</span></span><br><span class="line"><span class="comment">#      send: 2000                 # default 2000ms</span></span><br><span class="line"><span class="comment">#      read: 5000                 # default 5000ms</span></span><br><span class="line"><span class="comment">#  nacos:</span></span><br><span class="line"><span class="comment">#    host:</span></span><br><span class="line"><span class="comment">#      - "http://$&#123;username&#125;:$&#123;password&#125;@$&#123;host1&#125;:$&#123;port1&#125;"</span></span><br><span class="line"><span class="comment">#    prefix: "/nacos/v1/"</span></span><br><span class="line"><span class="comment">#    fetch_interval: 30    # default 30 sec</span></span><br><span class="line"><span class="comment">#    weight: 100           # default 100</span></span><br><span class="line"><span class="comment">#    timeout:</span></span><br><span class="line"><span class="comment">#      connect: 2000       # default 2000 ms</span></span><br><span class="line"><span class="comment">#      send: 2000          # default 2000 ms</span></span><br><span class="line"><span class="comment">#      read: 5000          # default 5000 ms</span></span><br><span class="line"><span class="comment">#  consul_kv:</span></span><br><span class="line"><span class="comment">#    servers:</span></span><br><span class="line"><span class="comment">#      - "http://127.0.0.1:8500"</span></span><br><span class="line"><span class="comment">#      - "http://127.0.0.1:8600"</span></span><br><span class="line"><span class="comment">#    prefix: "upstreams"</span></span><br><span class="line"><span class="comment">#    skip_keys:                    # if you need to skip special keys</span></span><br><span class="line"><span class="comment">#      - "upstreams/unused_api/"</span></span><br><span class="line"><span class="comment">#    timeout:</span></span><br><span class="line"><span class="comment">#      connect: 2000               # default 2000 ms</span></span><br><span class="line"><span class="comment">#      read: 2000                  # default 2000 ms</span></span><br><span class="line"><span class="comment">#      wait: 60                    # default 60 sec</span></span><br><span class="line"><span class="comment">#    weight: 1                     # default 1</span></span><br><span class="line"><span class="comment">#    fetch_interval: 3             # default 3 sec, only take effect for keepalive: false way</span></span><br><span class="line"><span class="comment">#    keepalive: true               # default true, use the long pull way to query consul servers</span></span><br><span class="line"><span class="comment">#    default_server:               # you can define default server when missing hit</span></span><br><span class="line"><span class="comment">#      host: "127.0.0.1"</span></span><br><span class="line"><span class="comment">#      port: 20999</span></span><br><span class="line"><span class="comment">#      metadata:</span></span><br><span class="line"><span class="comment">#        fail_timeout: 1           # default 1 ms</span></span><br><span class="line"><span class="comment">#        weight: 1                 # default 1</span></span><br><span class="line"><span class="comment">#        max_fails: 1              # default 1</span></span><br><span class="line"><span class="comment">#    dump:                         # if you need, when registered nodes updated can dump into file</span></span><br><span class="line"><span class="comment">#       path: "logs/consul_kv.dump"</span></span><br><span class="line"><span class="comment">#       expire: 2592000            # unit sec, here is 30 day</span></span><br><span class="line"><span class="comment">#  kubernetes:</span></span><br><span class="line"><span class="comment">#    service:</span></span><br><span class="line"><span class="comment">#      schema: https                     #apiserver schema, options [http, https], default https</span></span><br><span class="line"><span class="comment">#      host: $&#123;KUBERNETES_SERVICE_HOST&#125;  #apiserver host, options [ipv4, ipv6, domain, environment variable], default $&#123;KUBERNETES_SERVICE_HOST&#125;</span></span><br><span class="line"><span class="comment">#      port: $&#123;KUBERNETES_SERVICE_PORT&#125;  #apiserver port, options [port number, environment variable], default $&#123;KUBERNETES_SERVICE_PORT&#125;</span></span><br><span class="line"><span class="comment">#    client:</span></span><br><span class="line"><span class="comment">#      # serviceaccount token or path of serviceaccount token_file</span></span><br><span class="line"><span class="comment">#      token_file: $&#123;KUBERNETES_CLIENT_TOKEN_FILE&#125;</span></span><br><span class="line"><span class="comment">#      # token: |-</span></span><br><span class="line"><span class="comment">#       # eyJhbGciOiJSUzI1NiIsImtpZCI6Ikx5ME1DNWdnbmhQNkZCNlZYMXBsT3pYU3BBS2swYzBPSkN3ZnBESGpkUEEif</span></span><br><span class="line"><span class="comment">#       # 6Ikx5ME1DNWdnbmhQNkZCNlZYMXBsT3pYU3BBS2swYzBPSkN3ZnBESGpkUEEifeyJhbGciOiJSUzI1NiIsImtpZCI</span></span><br><span class="line"><span class="comment">#    # kubernetes discovery plugin support use namespace_selector</span></span><br><span class="line"><span class="comment">#    # you can use one of [equal, not_equal, match, not_match] filter namespace</span></span><br><span class="line"><span class="comment">#    namespace_selector:</span></span><br><span class="line"><span class="comment">#      # only save endpoints with namespace equal default</span></span><br><span class="line"><span class="comment">#      equal: default</span></span><br><span class="line"><span class="comment">#      # only save endpoints with namespace not equal default</span></span><br><span class="line"><span class="comment">#      #not_equal: default</span></span><br><span class="line"><span class="comment">#      # only save endpoints with namespace match one of [default, ^my-[a-z]+$]</span></span><br><span class="line"><span class="comment">#      #match:</span></span><br><span class="line"><span class="comment">#      #- default</span></span><br><span class="line"><span class="comment">#      #- ^my-[a-z]+$</span></span><br><span class="line"><span class="comment">#      # only save endpoints with namespace not match one of [default, ^my-[a-z]+$ ]</span></span><br><span class="line"><span class="comment">#      #not_match:</span></span><br><span class="line"><span class="comment">#      #- default</span></span><br><span class="line"><span class="comment">#      #- ^my-[a-z]+$</span></span><br><span class="line"><span class="comment">#    # kubernetes discovery plugin support use label_selector</span></span><br><span class="line"><span class="comment">#    # for the expression of label_selector, please refer to https://kubernetes.io/docs/concepts/overview/working-with-objects/labels</span></span><br><span class="line"><span class="comment">#    label_selector: |-</span></span><br><span class="line"><span class="comment">#      first="a",second="b"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">graphql:</span></span><br><span class="line">  <span class="attr">max_size:</span> <span class="number">1048576</span>               <span class="comment"># the maximum size limitation of graphql in bytes, default 1MiB</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#ext-plugin:</span></span><br><span class="line">  <span class="comment">#cmd: ["ls", "-l"]</span></span><br><span class="line"></span><br><span class="line"><span class="attr">plugins:</span>                          <span class="comment"># plugin list (sorted by priority)</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">real-ip</span>                        <span class="comment"># priority: 23000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">client-control</span>                 <span class="comment"># priority: 22000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">proxy-control</span>                  <span class="comment"># priority: 21990</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">request-id</span>                     <span class="comment"># priority: 12015</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">zipkin</span>                         <span class="comment"># priority: 12011</span></span><br><span class="line">  <span class="comment">#- skywalking                    # priority: 12010</span></span><br><span class="line">  <span class="comment">#- opentelemetry                 # priority: 12009</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ext-plugin-pre-req</span>             <span class="comment"># priority: 12000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">fault-injection</span>                <span class="comment"># priority: 11000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">mocking</span>                        <span class="comment"># priority: 10900</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">serverless-pre-function</span>        <span class="comment"># priority: 10000</span></span><br><span class="line">  <span class="comment">#- batch-requests                # priority: 4010</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cors</span>                           <span class="comment"># priority: 4000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ip-restriction</span>                 <span class="comment"># priority: 3000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ua-restriction</span>                 <span class="comment"># priority: 2999</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">referer-restriction</span>            <span class="comment"># priority: 2990</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">csrf</span>                           <span class="comment"># priority: 2980</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">uri-blocker</span>                    <span class="comment"># priority: 2900</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">request-validation</span>             <span class="comment"># priority: 2800</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">openid-connect</span>                 <span class="comment"># priority: 2599</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">authz-casbin</span>                   <span class="comment"># priority: 2560</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">authz-casdoor</span>                  <span class="comment"># priority: 2559</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">wolf-rbac</span>                      <span class="comment"># priority: 2555</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ldap-auth</span>                      <span class="comment"># priority: 2540</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hmac-auth</span>                      <span class="comment"># priority: 2530</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">basic-auth</span>                     <span class="comment"># priority: 2520</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">jwt-auth</span>                       <span class="comment"># priority: 2510</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">key-auth</span>                       <span class="comment"># priority: 2500</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">consumer-restriction</span>           <span class="comment"># priority: 2400</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">forward-auth</span>                   <span class="comment"># priority: 2002</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">opa</span>                            <span class="comment"># priority: 2001</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">authz-keycloak</span>                 <span class="comment"># priority: 2000</span></span><br><span class="line">  <span class="comment">#- error-log-logger              # priority: 1091</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">proxy-mirror</span>                   <span class="comment"># priority: 1010</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">proxy-cache</span>                    <span class="comment"># priority: 1009</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">proxy-rewrite</span>                  <span class="comment"># priority: 1008</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">workflow</span>                       <span class="comment"># priority: 1006</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">api-breaker</span>                    <span class="comment"># priority: 1005</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">limit-conn</span>                     <span class="comment"># priority: 1003</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">limit-count</span>                    <span class="comment"># priority: 1002</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">limit-req</span>                      <span class="comment"># priority: 1001</span></span><br><span class="line">  <span class="comment">#- node-status                   # priority: 1000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">gzip</span>                           <span class="comment"># priority: 995</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">server-info</span>                    <span class="comment"># priority: 990</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">traffic-split</span>                  <span class="comment"># priority: 966</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">redirect</span>                       <span class="comment"># priority: 900</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">response-rewrite</span>               <span class="comment"># priority: 899</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">kafka-proxy</span>                    <span class="comment"># priority: 508</span></span><br><span class="line">  <span class="comment">#- dubbo-proxy                   # priority: 507</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">grpc-transcode</span>                 <span class="comment"># priority: 506</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">grpc-web</span>                       <span class="comment"># priority: 505</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">public-api</span>                     <span class="comment"># priority: 501</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">prometheus</span>                     <span class="comment"># priority: 500</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">datadog</span>                        <span class="comment"># priority: 495</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">echo</span>                           <span class="comment"># priority: 412</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">loggly</span>                         <span class="comment"># priority: 411</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">http-logger</span>                    <span class="comment"># priority: 410</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">splunk-hec-logging</span>             <span class="comment"># priority: 409</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">skywalking-logger</span>              <span class="comment"># priority: 408</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">google-cloud-logging</span>           <span class="comment"># priority: 407</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sls-logger</span>                     <span class="comment"># priority: 406</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">tcp-logger</span>                     <span class="comment"># priority: 405</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">kafka-logger</span>                   <span class="comment"># priority: 403</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">rocketmq-logger</span>                <span class="comment"># priority: 402</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">syslog</span>                         <span class="comment"># priority: 401</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">udp-logger</span>                     <span class="comment"># priority: 400</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">file-logger</span>                    <span class="comment"># priority: 399</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">clickhouse-logger</span>              <span class="comment"># priority: 398</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">tencent-cloud-cls</span>              <span class="comment"># priority: 397</span></span><br><span class="line">  <span class="comment">#- log-rotate                    # priority: 100</span></span><br><span class="line">  <span class="comment"># &lt;- recommend to use priority (0, 100) for your custom plugins</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">example-plugin</span>                 <span class="comment"># priority: 0</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">aws-lambda</span>                     <span class="comment"># priority: -1899</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">azure-functions</span>                <span class="comment"># priority: -1900</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">openwhisk</span>                      <span class="comment"># priority: -1901</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">serverless-post-function</span>       <span class="comment"># priority: -2000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ext-plugin-post-req</span>            <span class="comment"># priority: -3000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ext-plugin-post-resp</span>           <span class="comment"># priority: -4000</span></span><br><span class="line"></span><br><span class="line"><span class="attr">stream_plugins:</span> <span class="comment"># sorted by priority</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ip-restriction</span>                 <span class="comment"># priority: 3000</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">limit-conn</span>                     <span class="comment"># priority: 1003</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">mqtt-proxy</span>                     <span class="comment"># priority: 1000</span></span><br><span class="line">  <span class="comment">#- prometheus                    # priority: 500</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">syslog</span>                         <span class="comment"># priority: 401</span></span><br><span class="line">  <span class="comment"># &lt;- recommend to use priority (0, 100) for your custom plugins</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#wasm:</span></span><br><span class="line">  <span class="comment">#plugins:</span></span><br><span class="line">    <span class="comment">#- name: wasm_log</span></span><br><span class="line">      <span class="comment">#priority: 7999</span></span><br><span class="line">      <span class="comment">#file: t/wasm/log/main.go.wasm</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#xrpc:</span></span><br><span class="line">  <span class="comment">#protocols:</span></span><br><span class="line">    <span class="comment">#- name: pingpong</span></span><br><span class="line"></span><br><span class="line"><span class="attr">plugin_attr:</span></span><br><span class="line">  <span class="attr">log-rotate:</span></span><br><span class="line">    <span class="attr">interval:</span> <span class="number">3600</span>    <span class="comment"># rotate interval (unit: second)</span></span><br><span class="line">    <span class="attr">max_kept:</span> <span class="number">168</span>     <span class="comment"># max number of log files will be kept</span></span><br><span class="line">    <span class="attr">max_size:</span> <span class="number">-1</span>      <span class="comment"># max size bytes of log files to be rotated, size check would be skipped with a value less than 0</span></span><br><span class="line">    <span class="attr">enable_compression:</span> <span class="literal">false</span>    <span class="comment"># enable log file compression(gzip) or not, default false</span></span><br><span class="line">  <span class="attr">skywalking:</span></span><br><span class="line">    <span class="attr">service_name:</span> <span class="string">APISIX</span></span><br><span class="line">    <span class="attr">service_instance_name:</span> <span class="string">APISIX</span> <span class="string">Instance</span> <span class="string">Name</span></span><br><span class="line">    <span class="attr">endpoint_addr:</span> <span class="string">http://127.0.0.1:12800</span></span><br><span class="line">  <span class="attr">opentelemetry:</span></span><br><span class="line">    <span class="attr">trace_id_source:</span> <span class="string">x-request-id</span></span><br><span class="line">    <span class="attr">resource:</span></span><br><span class="line">      <span class="attr">service.name:</span> <span class="string">APISIX</span></span><br><span class="line">    <span class="attr">collector:</span></span><br><span class="line">      <span class="attr">address:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:4318</span></span><br><span class="line">      <span class="attr">request_timeout:</span> <span class="number">3</span></span><br><span class="line">      <span class="attr">request_headers:</span></span><br><span class="line">        <span class="attr">Authorization:</span> <span class="string">token</span></span><br><span class="line">    <span class="attr">batch_span_processor:</span></span><br><span class="line">      <span class="attr">drop_on_queue_full:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">max_queue_size:</span> <span class="number">1024</span></span><br><span class="line">      <span class="attr">batch_timeout:</span> <span class="number">2</span></span><br><span class="line">      <span class="attr">inactive_timeout:</span> <span class="number">1</span></span><br><span class="line">      <span class="attr">max_export_batch_size:</span> <span class="number">16</span></span><br><span class="line">  <span class="attr">prometheus:</span></span><br><span class="line">    <span class="attr">export_uri:</span> <span class="string">/apisix/prometheus/metrics</span></span><br><span class="line">    <span class="attr">metric_prefix:</span> <span class="string">apisix_</span></span><br><span class="line">    <span class="attr">enable_export_server:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">export_addr:</span></span><br><span class="line">      <span class="attr">ip:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span></span><br><span class="line">      <span class="attr">port:</span> <span class="number">9091</span></span><br><span class="line">    <span class="comment">#metrics:</span></span><br><span class="line">    <span class="comment">#  http_status:</span></span><br><span class="line">    <span class="comment">#    # extra labels from nginx variables</span></span><br><span class="line">    <span class="comment">#    extra_labels:</span></span><br><span class="line">    <span class="comment">#      # the label name doesn't need to be the same as variable name</span></span><br><span class="line">    <span class="comment">#      # below labels are only examples, you could add any valid variables as you need</span></span><br><span class="line">    <span class="comment">#      - upstream_addr: $upstream_addr</span></span><br><span class="line">    <span class="comment">#      - upstream_status: $upstream_status</span></span><br><span class="line">    <span class="comment">#  http_latency:</span></span><br><span class="line">    <span class="comment">#    extra_labels:</span></span><br><span class="line">    <span class="comment">#      - upstream_addr: $upstream_addr</span></span><br><span class="line">    <span class="comment">#  bandwidth:</span></span><br><span class="line">    <span class="comment">#    extra_labels:</span></span><br><span class="line">    <span class="comment">#      - upstream_addr: $upstream_addr</span></span><br><span class="line">  <span class="attr">server-info:</span></span><br><span class="line">    <span class="attr">report_ttl:</span> <span class="number">60</span>   <span class="comment"># live time for server info in etcd (unit: second)</span></span><br><span class="line">  <span class="attr">dubbo-proxy:</span></span><br><span class="line">    <span class="attr">upstream_multiplex_count:</span> <span class="number">32</span></span><br><span class="line">  <span class="attr">request-id:</span></span><br><span class="line">    <span class="attr">snowflake:</span></span><br><span class="line">      <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">      <span class="attr">snowflake_epoc:</span> <span class="number">1609459200000</span>   <span class="comment"># the starting timestamp is expressed in milliseconds</span></span><br><span class="line">      <span class="attr">data_machine_bits:</span> <span class="number">12</span>           <span class="comment"># data machine bit, maximum 31, because Lua cannot do bit operations greater than 31</span></span><br><span class="line">      <span class="attr">sequence_bits:</span> <span class="number">10</span>               <span class="comment"># each machine generates a maximum of (1 &lt;&lt; sequence_bits) serial numbers per millisecond</span></span><br><span class="line">      <span class="attr">data_machine_ttl:</span> <span class="number">30</span>            <span class="comment"># live time for data_machine in etcd (unit: second)</span></span><br><span class="line">      <span class="attr">data_machine_interval:</span> <span class="number">10</span>       <span class="comment"># lease renewal interval in etcd (unit: second)</span></span><br><span class="line">  <span class="attr">proxy-mirror:</span></span><br><span class="line">    <span class="attr">timeout:</span>                          <span class="comment"># proxy timeout in mirrored sub-request</span></span><br><span class="line">      <span class="attr">connect:</span> <span class="string">60s</span></span><br><span class="line">      <span class="attr">read:</span> <span class="string">60s</span></span><br><span class="line">      <span class="attr">send:</span> <span class="string">60s</span></span><br><span class="line"><span class="comment">#  redirect:</span></span><br><span class="line"><span class="comment">#    https_port: 8443   # the default port for use by HTTP redirects to HTTPS</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#deployment:</span></span><br><span class="line"><span class="comment">#    role: traditional</span></span><br><span class="line"><span class="comment">#    role_traditional:</span></span><br><span class="line"><span class="comment">#        config_provider: etcd</span></span><br><span class="line"><span class="comment">#    etcd:</span></span><br><span class="line"><span class="comment">#        host:                           # it's possible to define multiple etcd hosts addresses of the same etcd cluster.</span></span><br><span class="line"><span class="comment">#          - "http://127.0.0.1:2379"     # multiple etcd address, if your etcd cluster enables TLS, please use https scheme,</span></span><br><span class="line"><span class="comment">#                                        # e.g. https://127.0.0.1:2379.</span></span><br><span class="line"><span class="comment">#        prefix: /apisix                 # configuration prefix in etcd</span></span><br><span class="line"><span class="comment">#        timeout: 30                     # 30 seconds</span></span><br></pre></td></tr></table></figure>
<h2 id="2-apisix-ingress-controller"><a href="#2-apisix-ingress-controller" class="headerlink" title="2. apisix-ingress-controller"></a>2. apisix-ingress-controller</h2><p>参考：<a href="https://github.com/apache/apisix-ingress-controller/blob/master/conf/config-default.yaml" target="_blank" rel="noopener">apisix-ingress-controller/config-default.yaml at master · apache/apisix-ingress-controller · GitHub</a></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Licensed to the Apache Software Foundation (ASF) under one or more</span></span><br><span class="line"><span class="comment"># contributor license agreements.  See the NOTICE file distributed with</span></span><br><span class="line"><span class="comment"># this work for additional information regarding copyright ownership.</span></span><br><span class="line"><span class="comment"># The ASF licenses this file to You under the Apache License, Version 2.0</span></span><br><span class="line"><span class="comment"># (the "License"); you may not use this file except in compliance with</span></span><br><span class="line"><span class="comment"># the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"># distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"># See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"># limitations under the License.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># log options</span></span><br><span class="line"><span class="attr">log_level:</span> <span class="string">"info"</span>    <span class="comment"># the error log level, default is info, optional values are:</span></span><br><span class="line">                     <span class="comment"># debug</span></span><br><span class="line">                     <span class="comment"># info</span></span><br><span class="line">                     <span class="comment"># warn</span></span><br><span class="line">                     <span class="comment"># error</span></span><br><span class="line">                     <span class="comment"># panic</span></span><br><span class="line">                     <span class="comment"># fatal</span></span><br><span class="line"><span class="attr">log_output:</span> <span class="string">"stderr"</span> <span class="comment"># the output file path of error log, default is stderr, when</span></span><br><span class="line">                     <span class="comment"># the file path is "stderr" or "stdout", logs are marshalled</span></span><br><span class="line">                     <span class="comment"># plainly, which is more readable for human; otherwise logs</span></span><br><span class="line">                     <span class="comment"># are marshalled in JSON format, which can be parsed by</span></span><br><span class="line">                     <span class="comment"># programs easily.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">log_rotate_output_path:</span> <span class="string">""</span>  <span class="comment"># rotate output path, the logs will be written in this file</span></span><br><span class="line"><span class="attr">log_rotation_max_size:</span> <span class="number">100</span>  <span class="comment"># rotate max size, max size in megabytes of log file before it get rotated. It defaults to 100</span></span><br><span class="line"><span class="attr">log_rotation_max_age:</span> <span class="number">0</span>     <span class="comment"># rotate max age, max age of old log files to retain</span></span><br><span class="line"><span class="attr">log_rotation_max_backups:</span> <span class="number">0</span> <span class="comment"># rotate max backups, max numbers of old log files to retain</span></span><br><span class="line"></span><br><span class="line"><span class="attr">cert_file:</span> <span class="string">"/etc/webhook/certs/cert.pem"</span> <span class="comment"># the TLS certificate file path.</span></span><br><span class="line"><span class="attr">key_file:</span> <span class="string">"/etc/webhook/certs/key.pem"</span>   <span class="comment"># the TLS key file path.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">http_listen:</span> <span class="string">":8080"</span>   <span class="comment"># the HTTP Server listen address, default is ":8080"</span></span><br><span class="line"><span class="attr">https_listen:</span> <span class="string">":8443"</span>   <span class="comment"># the HTTPS Server listen address, default is ":8443"</span></span><br><span class="line"><span class="attr">ingress_publish_service:</span> <span class="string">""</span>  <span class="comment"># the controller will use the Endpoint of this Service to</span></span><br><span class="line">                             <span class="comment"># update the status information of the Ingress resource.</span></span><br><span class="line">                             <span class="comment"># The format is "namespace/svc-name" to solve the situation that</span></span><br><span class="line">                             <span class="comment"># the data plane and the controller are not deployed in the same namespace.</span></span><br><span class="line"><span class="attr">ingress_status_address:</span> <span class="string">[]</span>   <span class="comment"># when there is no available information on the Service</span></span><br><span class="line">                             <span class="comment"># used for publishing on the data plane,</span></span><br><span class="line">                             <span class="comment"># the static address provided here will be</span></span><br><span class="line">                             <span class="comment"># used to update the status information of Ingress.</span></span><br><span class="line">                             <span class="comment"># When ingress-publish-service is specified at the same time, ingress-status-address is preferred.</span></span><br><span class="line">                             <span class="comment"># For example, no available LB exists in the bare metal environment.</span></span><br><span class="line"><span class="attr">enable_profiling:</span> <span class="literal">true</span> <span class="comment"># enable profiling via web interfaces</span></span><br><span class="line">                       <span class="comment"># host:port/debug/pprof, default is true.</span></span><br><span class="line"><span class="attr">apisix-resource-sync-interval:</span> <span class="string">"300s"</span> <span class="comment"># Default interval for synchronizing Kubernetes resources to APISIX</span></span><br><span class="line"><span class="comment"># Kubernetes related configurations.</span></span><br><span class="line"><span class="attr">kubernetes:</span></span><br><span class="line">  <span class="attr">kubeconfig:</span> <span class="string">""</span>                       <span class="comment"># the Kubernetes configuration file path, default is</span></span><br><span class="line">                                       <span class="comment"># "", so the in-cluster configuration will be used.</span></span><br><span class="line">  <span class="attr">resync_interval:</span> <span class="string">"6h"</span>                <span class="comment"># how long should apisix-ingress-controller</span></span><br><span class="line">                                       <span class="comment"># re-synchronizes with Kubernetes, default is 6h,</span></span><br><span class="line">                                       <span class="comment"># and the minimal resync interval is 30s.</span></span><br><span class="line">  <span class="attr">app_namespaces:</span> <span class="string">["*"]</span>                <span class="comment"># namespace list that controller will watch for resources,</span></span><br><span class="line">                                       <span class="comment"># by default all namespaces (represented by "*") are watched.</span></span><br><span class="line">                                       <span class="comment"># The `app_namespace` is deprecated, using `namespace_selector` instead since version 1.4.0</span></span><br><span class="line">  <span class="attr">namespace_selector:</span> <span class="string">[""]</span>             <span class="comment"># namespace_selector represent basis for selecting managed namespaces.</span></span><br><span class="line">                                       <span class="comment"># the field is support since version 1.4.0</span></span><br><span class="line">                                       <span class="comment"># For example, "apisix.ingress=watching", so ingress will watching the namespaces which labels "apisix.ingress=watching"</span></span><br><span class="line">  <span class="attr">election_id:</span> <span class="string">"ingress-apisix-leader"</span> <span class="comment"># the election id for the controller leader campaign,</span></span><br><span class="line">                                       <span class="comment"># only the leader will watch and delivery resource changes,</span></span><br><span class="line">                                       <span class="comment"># other instances (as candidates) stand by.</span></span><br><span class="line">  <span class="attr">ingress_class:</span> <span class="string">"apisix"</span>              <span class="comment"># the class of an Ingress object is set using the field</span></span><br><span class="line">                                       <span class="comment"># IngressClassName in Kubernetes clusters version v1.18.0</span></span><br><span class="line">                                       <span class="comment"># or higher or the annotation "kubernetes.io/ingress.class"</span></span><br><span class="line">                                       <span class="comment"># (deprecated).</span></span><br><span class="line">  <span class="attr">ingress_version:</span> <span class="string">"networking/v1"</span>     <span class="comment"># the supported ingress api group version, can be "networking/v1beta1"</span></span><br><span class="line">                                       <span class="comment"># , "networking/v1" (for Kubernetes version v1.19.0 or higher), and</span></span><br><span class="line">                                       <span class="comment"># "extensions/v1beta1", default is "networking/v1".</span></span><br><span class="line">  <span class="attr">watch_endpointslices:</span> <span class="literal">false</span>          <span class="comment"># whether to watch EndpointSlices rather than Endpoints.</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">apisix_route_version:</span> <span class="string">"apisix.apache.org/v2"</span>  <span class="comment"># the supported apisixroute api group version.</span></span><br><span class="line">                                                     <span class="comment"># the latest version is "apisix.apache.org/v2".</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">enable_gateway_api:</span> <span class="literal">false</span>            <span class="comment"># whether to enable support for Gateway API.</span></span><br><span class="line">                                       <span class="comment"># <span class="doctag">Note:</span> This feature is currently under development and may not work as expected. </span></span><br><span class="line">                                       <span class="comment"># It is not recommended to use it in a production environment.</span></span><br><span class="line">                                       <span class="comment"># Before we announce support for it to reach Beta level or GA.</span></span><br><span class="line">  <span class="attr">api_version:</span> <span class="string">apisix.apache.org/v2</span>    <span class="comment"># the default value of API version is "apisix.apache.org/v2", support "apisix.apache.org/v2beta3" and "apisix.apache.org/v2".</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># APISIX related configurations.</span></span><br><span class="line"><span class="attr">apisix:</span></span><br><span class="line">  <span class="attr">default_cluster_base_url:</span> <span class="string">"http://127.0.0.1:9080/apisix/admin"</span> <span class="comment"># The base url of admin api / manager api</span></span><br><span class="line">                                                                 <span class="comment"># of the default APISIX cluster</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">default_cluster_admin_key:</span> <span class="string">""</span> <span class="comment"># the admin key used for the authentication of admin api / manager api in the</span></span><br><span class="line">                                <span class="comment"># default APISIX cluster, by default this field is unset.</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">default_cluster_name:</span> <span class="string">"default"</span> <span class="comment"># name of the default APISIX cluster.</span></span><br></pre></td></tr></table></figure>
<h2 id="3-apisix-dashboard"><a href="#3-apisix-dashboard" class="headerlink" title="3. apisix-dashboard"></a>3. apisix-dashboard</h2><p>参考：<a href="https://github.com/apache/apisix-dashboard/blob/master/api/conf/conf.yaml" target="_blank" rel="noopener">apisix-dashboard/conf.yaml at master · apache/apisix-dashboard · GitHub</a></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Licensed to the Apache Software Foundation (ASF) under one or more</span></span><br><span class="line"><span class="comment"># contributor license agreements.  See the NOTICE file distributed with</span></span><br><span class="line"><span class="comment"># this work for additional information regarding copyright ownership.</span></span><br><span class="line"><span class="comment"># The ASF licenses this file to You under the Apache License, Version 2.0</span></span><br><span class="line"><span class="comment"># (the "License"); you may not use this file except in compliance with</span></span><br><span class="line"><span class="comment"># the License.  You may obtain a copy of the License at</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#     http://www.apache.org/licenses/LICENSE-2.0</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Unless required by applicable law or agreed to in writing, software</span></span><br><span class="line"><span class="comment"># distributed under the License is distributed on an "AS IS" BASIS,</span></span><br><span class="line"><span class="comment"># WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.</span></span><br><span class="line"><span class="comment"># See the License for the specific language governing permissions and</span></span><br><span class="line"><span class="comment"># limitations under the License.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># yamllint disable rule:comments-indentation</span></span><br><span class="line"><span class="attr">conf:</span></span><br><span class="line">  <span class="attr">listen:</span></span><br><span class="line">    <span class="comment"># host: 127.0.0.1     # the address on which the `Manager API` should listen.</span></span><br><span class="line">                          <span class="comment"># The default value is 0.0.0.0, if want to specify, please enable it.</span></span><br><span class="line">                          <span class="comment"># This value accepts IPv4, IPv6, and hostname.</span></span><br><span class="line">    <span class="attr">port:</span> <span class="number">9000</span>            <span class="comment"># The port on which the `Manager API` should listen.</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># ssl:</span></span><br><span class="line">  <span class="comment">#   host: 127.0.0.1     # the address on which the `Manager API` should listen for HTTPS.</span></span><br><span class="line">                          <span class="comment"># The default value is 0.0.0.0, if want to specify, please enable it.</span></span><br><span class="line">  <span class="comment">#   port: 9001            # The port on which the `Manager API` should listen for HTTPS.</span></span><br><span class="line">  <span class="comment">#   cert: "/tmp/cert/example.crt" # Path of your SSL cert.</span></span><br><span class="line">  <span class="comment">#   key:  "/tmp/cert/example.key"  # Path of your SSL key.</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">allow_list:</span>             <span class="comment"># If we don't set any IP list, then any IP access is allowed by default.</span></span><br><span class="line">    <span class="bullet">-</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>           <span class="comment"># The rules are checked in sequence until the first match is found.</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">::1</span>                 <span class="comment"># In this example, access is allowed only for IPv4 network 127.0.0.1, and for IPv6 network ::1.</span></span><br><span class="line">                          <span class="comment"># It also support CIDR like 192.168.1.0/24 and 2001:0db8::/32</span></span><br><span class="line">  <span class="attr">etcd:</span></span><br><span class="line">    <span class="attr">endpoints:</span>            <span class="comment"># supports defining multiple etcd host addresses for an etcd cluster</span></span><br><span class="line">      <span class="bullet">-</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:2379</span></span><br><span class="line">                          <span class="comment"># yamllint disable rule:comments-indentation</span></span><br><span class="line">                          <span class="comment"># etcd basic auth info</span></span><br><span class="line">    <span class="comment"># username: "root"    # ignore etcd username if not enable etcd auth</span></span><br><span class="line">    <span class="comment"># password: "123456"  # ignore etcd password if not enable etcd auth</span></span><br><span class="line">    <span class="attr">mtls:</span></span><br><span class="line">      <span class="attr">key_file:</span> <span class="string">""</span>          <span class="comment"># Path of your self-signed client side key</span></span><br><span class="line">      <span class="attr">cert_file:</span> <span class="string">""</span>         <span class="comment"># Path of your self-signed client side cert</span></span><br><span class="line">      <span class="attr">ca_file:</span> <span class="string">""</span>           <span class="comment"># Path of your self-signed ca cert, the CA is used to sign callers' certificates</span></span><br><span class="line">    <span class="comment"># prefix: /apisix       # apisix config's prefix in etcd, /apisix by default</span></span><br><span class="line">  <span class="attr">log:</span></span><br><span class="line">    <span class="attr">error_log:</span></span><br><span class="line">      <span class="attr">level:</span> <span class="string">warn</span>       <span class="comment"># supports levels, lower to higher: debug, info, warn, error, panic, fatal</span></span><br><span class="line">      <span class="attr">file_path:</span></span><br><span class="line">        <span class="string">logs/error.log</span>  <span class="comment"># supports relative path, absolute path, standard output</span></span><br><span class="line">                        <span class="comment"># such as: logs/error.log, /tmp/logs/error.log, /dev/stdout, /dev/stderr</span></span><br><span class="line">                        <span class="comment"># such as absolute path on Windows: winfile:///C:\error.log</span></span><br><span class="line">    <span class="attr">access_log:</span></span><br><span class="line">      <span class="attr">file_path:</span></span><br><span class="line">        <span class="string">logs/access.log</span>  <span class="comment"># supports relative path, absolute path, standard output</span></span><br><span class="line">                         <span class="comment"># such as: logs/access.log, /tmp/logs/access.log, /dev/stdout, /dev/stderr</span></span><br><span class="line">                         <span class="comment"># such as absolute path on Windows: winfile:///C:\access.log</span></span><br><span class="line">                         <span class="comment"># log example: 2020-12-09T16:38:09.039+0800    INFO    filter/logging.go:46    /apisix/admin/routes/r1    &#123;"status": 401, "host": "127.0.0.1:9000", "query": "asdfsafd=adf&amp;a=a", "requestId": "3d50ecb8-758c-46d1-af5b-cd9d1c820156", "latency": 0, "remoteIP": "127.0.0.1", "method": "PUT", "errs": []&#125;</span></span><br><span class="line">  <span class="attr">max_cpu:</span> <span class="number">0</span>             <span class="comment"># supports tweaking with the number of OS threads are going to be used for parallelism. Default value: 0 [will use max number of available cpu cores considering hyperthreading (if any)]. If the value is negative, is will not touch the existing parallelism profile.</span></span><br><span class="line">  <span class="comment"># security:</span></span><br><span class="line">  <span class="comment">#   access_control_allow_origin: "http://httpbin.org"</span></span><br><span class="line">  <span class="comment">#   access_control_allow_credentials: true          # support using custom cors configration</span></span><br><span class="line">  <span class="comment">#   access_control_allow_headers: "Authorization"</span></span><br><span class="line">  <span class="comment">#   access_control-allow_methods: "*"</span></span><br><span class="line">  <span class="comment">#   x_frame_options: "deny"</span></span><br><span class="line">  <span class="comment">#   content_security_policy: "default-src 'self'; script-src 'self' 'unsafe-eval' 'unsafe-inline'; style-src 'self' 'unsafe-inline'; frame-src xx.xx.xx.xx:3000"  # You can set frame-src to provide content for your grafana panel.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">authentication:</span></span><br><span class="line">  <span class="attr">secret:</span></span><br><span class="line">    <span class="string">secret</span>              <span class="comment"># secret for jwt token generation.</span></span><br><span class="line">                        <span class="comment"># <span class="doctag">NOTE:</span> Highly recommended to modify this value to protect `manager api`.</span></span><br><span class="line">                        <span class="comment"># if it's default value, when `manager api` start, it will generate a random string to replace it.</span></span><br><span class="line">  <span class="attr">expire_time:</span> <span class="number">3600</span>     <span class="comment"># jwt token expire time, in second</span></span><br><span class="line">  <span class="attr">users:</span>                <span class="comment"># yamllint enable rule:comments-indentation</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">username:</span> <span class="string">admin</span>   <span class="comment"># username and password for login `manager api`</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">admin</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">username:</span> <span class="string">user</span></span><br><span class="line">      <span class="attr">password:</span> <span class="string">user</span></span><br><span class="line"></span><br><span class="line"><span class="attr">plugins:</span>                          <span class="comment"># plugin list (sorted in alphabetical order)</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">api-breaker</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">authz-keycloak</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">basic-auth</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">batch-requests</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">consumer-restriction</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">cors</span></span><br><span class="line">  <span class="comment"># - dubbo-proxy</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">echo</span></span><br><span class="line">  <span class="comment"># - error-log-logger</span></span><br><span class="line">  <span class="comment"># - example-plugin</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">fault-injection</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">grpc-transcode</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hmac-auth</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">http-logger</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">ip-restriction</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">jwt-auth</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">kafka-logger</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">key-auth</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">limit-conn</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">limit-count</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">limit-req</span></span><br><span class="line">  <span class="comment"># - log-rotate</span></span><br><span class="line">  <span class="comment"># - node-status</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">openid-connect</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">prometheus</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">proxy-cache</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">proxy-mirror</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">proxy-rewrite</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">redirect</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">referer-restriction</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">request-id</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">request-validation</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">response-rewrite</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">serverless-post-function</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">serverless-pre-function</span></span><br><span class="line">  <span class="comment"># - skywalking</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">sls-logger</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">syslog</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">tcp-logger</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">udp-logger</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">uri-blocker</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">wolf-rbac</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">zipkin</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">server-info</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">traffic-split</span></span><br></pre></td></tr></table></figure>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/kubernetes-notes/operation/kubectl/kubectl-node-shell/" data-toggle="tooltip" data-placement="top" title="kubectl进入node shell">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/kubernetes-notes/network/gateway/apisix-ingress-controller-usage/" data-toggle="tooltip" data-placement="top" title="创建路由">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <br>

                <!--打赏-->
                
                    <div class="reward">
                        <div class="reward-button">赏 <span class="reward-code"> 
                            <span class="alipay-code"> <img class="alipay-img" src="https://res.cloudinary.com/dqxtn0ick/image/upload/v1551599640/blog/donate/alipay.jpg"><b>支付宝打赏</b></span> 
                            <span class="wechat-code"> <img class="wechat-img" src="https://res.cloudinary.com/dqxtn0ick/image/upload/v1551599472/blog/donate/wechatpay.jpg"><b>微信打赏</b> </span>
                            </span></div>
                        <p class="reward-notice">赞赏一下</p>
                    </div>
                
                <!--打赏-->                

                <br>

                <!--分享-->
                
                    <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                    <!--  css & js -->
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!--分享-->
                <br>                
                
                <!-- require APlayer -->
                
                    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.css">
                    <script src="https://cdn.jsdelivr.net/npm/aplayer@1.10/dist/APlayer.min.js"></script>
                    <script src="https://cdn.jsdelivr.net/npm/meting@1.2/dist/Meting.min.js"></script>
    
                    <div class="aplayer"
                        data-id="2423410161"
                        data-server="netease"
                        data-type="playlist"
                        data-fixed="true" >
                    </div>
                
                
                

                <br>

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->

                
                    <!-- disqus 评论框 start -->
                    <div class="comment">
                        <div id="lv-container" data-id="city" data-uid="MTAyMC8zNDM0Mi8xMDg3OQ=="></div>
                    </div>
                    <!-- disqus 评论框 end -->
                

            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

  
    <style>
      span.toc-nav-number{
        display: none
      }
    </style>
  
    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#1-apisix配置"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">1. apisix配置</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#2-apisix-ingress-controller"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">2. apisix-ingress-controller</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#3-apisix-dashboard"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">3. apisix-dashboard</span></a></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#ApiSix" title="ApiSix">ApiSix</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
                <hr>
                <h5>FRIENDS</h5>
                <ul class="list-inline">

                    
                        <li><a href="http://blog.csdn.net/huwh_" target="_blank">CSDN Blog 胡伟煌</a></li>
                    
                        <li><a href="https://www.huweihuang.com/kubernetes-notes" target="_blank">Kubernetes 学习笔记</a></li>
                    
                        <li><a href="https://www.huweihuang.com/golang-notes" target="_blank">Golang 学习笔记</a></li>
                    
                        <li><a href="http://dockone.io/people/胡伟煌" target="_blank">DockOne 胡伟煌</a></li>
                    
                        <li><a href="https://yq.aliyun.com/u/huweihuang" target="_blank">阿里云栖社区 胡伟煌</a></li>
                    
                </ul>
                
            </div>
        </div>
    </div>
</article>






    <!-- 来必力City版公共JS代码 start (一个网页只需插入一次) -->
    <script type="text/javascript">
       (function(d, s) {
           var j, e = d.getElementsByTagName(s)[0];
    
           if (typeof LivereTower === 'function') { return; }
    
           j = d.createElement(s);
           j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
           j.async = true;
    
           e.parentNode.insertBefore(j, e);
       })(document, 'script');
    </script>
    <noscript>为正常使用来必力评论功能请激活JavaScript</noscript>
    <!-- 来必力City版 公共JS代码 end -->



<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>


<!-- chrome Firefox 中文锚点定位失效-->
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.js"></script>
<!-- smooth scroll behavior polyfill  -->
<script type="text/javascript" src="/js/smoothscroll.js"></script>
<script>
        $('#toc').on('click','a',function(a){
            // var isChrome = window.navigator.userAgent.indexOf("Chrome") !== -1;
            // console.log(window.navigator.userAgent,isChrome)
                // if(isChrome) {
                    // console.log(a.currentTarget.outerHTML);
                    // console.log($(a.currentTarget).attr("href"));
                    //跳转到指定锚点
                    // document.getElementById(a.target.innerText.toLowerCase()).scrollIntoView(true);
                    document.getElementById($(a.currentTarget).attr("href").replace("#","")).scrollIntoView({behavior: 'smooth' });
                // }
        })  
</script>

<!-- https://www.google.com/adsense -->

<script data-ad-client="ca-pub-8205636531078391" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>    



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                    <li>
                        <a target="_blank" href="https://twitter.com/huweihuang">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                
                

                

                
                    <li>
                        <a target="_blank" href="https://www.facebook.com/huweihuang0">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank"  href="https://github.com/huweihuang">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                
                    <li>
                        <a target="_blank"  href="https://www.linkedin.com/in/huweihuang">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; 胡伟煌 2022 
                    <br>
                    Theme by <a href="http://beantech.org">BeanTech</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="http://www.huweihuang.com">胡伟煌</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huweihuang&repo=hexo-theme-huweihuang&type=star&count=true" >
                    </iframe>
                    <br>
                    闽ICP备18027922号 | 闽公网安备35020302033291号                    
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://www.huweihuang.com/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-114718458-2';
    var _gaDomain = 'www.huweihuang.com';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->

<script>
    // dynamic User by Hux
    var _baId = 'e146d71b77957235bba1e709d930f62e';

    // Originial
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<!-- <img src="http://www.huweihuang.com/img/icon_wechat.png" width="0" height="0" /> -->
<!-- Migrate from head to bottom, no longer block render and still work -->

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>

</html>
